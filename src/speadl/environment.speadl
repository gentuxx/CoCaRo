import CoCaRo.CustomColor
import CoCaRo.environment.interfaces.IBoxGenerator
import CoCaRo.environment.interfaces.IEnvironment
import CoCaRo.environment.interfaces.INestCreator
import speadl.agents.RobotsEcosystem
import CoCaRo.environment.interfaces.IEnvInit
import CoCaRo.agents.IRobotCore

namespace speadl.environment {
	
	ecosystem BoxEnv {
		provides boxGenerator : IBoxGenerator
		
		species Box(color : CustomColor) {
			
		}
	}
	
	ecosystem NestEnv {
		provides nestCreator : INestCreator
		
		species Nest(color : CustomColor) {
			
		}
	}
	
	component Grid {
		provides nestCreator : INestCreator = nestEnv.nestCreator
		provides boxGenerator : IBoxGenerator = boxEnv.boxGenerator
		
		part boxEnv : BoxEnv {
			
		}
		
		part nestEnv : NestEnv {
			
		}
		
		provides env : IEnvironment
	}
	
	
	
	ecosystem Environment {
		
		provides boxGenerator : IBoxGenerator = globalGrid.boxGenerator
		provides nestCreator : INestCreator = globalGrid.nestCreator
		provides envInit : IEnvInit
		
		species RobotGrid(identifier : String, color : CustomColor) {
			use aRobot : robotEcosystem.Robot(identifier,color) {
				bind gridR to grid.env
			}
			
			provides robotCore : IRobotCore = aRobot.robotCore
			
			part grid : Grid {
				
			}
		}
	
		part robotEcosystem : RobotsEcosystem {
			
		}
		
		part globalGrid : Grid {
			
		}
	}
}